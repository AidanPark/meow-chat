# 🐾 반려동물(고양이) 헬스케어 상담 챗봇 프로젝트
---

## 🧶 프로젝트 개요

고양이 헬스케어 챗봇은 LangChain 기반의 RAG 구조를 활용하여 반려묘의 건강 데이터를 지능적으로 분석하고, 맞춤형 상담을 제공하는 AI 서비스입니다.  
‘고양이’라는 도메인으로 범위를 제한함으로써, 해당 영역 내에서는 높은 품질의 응답과 안정적인 사용자 경험을 지향합니다.  
보호자는 챗봇을 통해 식욕, 활동량, 배변 상태 등 다양한 건강 지표를 입력하고, 수의학적 조언을 받을 수 있습니다.  
텍스트 입력뿐 아니라 혈액검사 결과, 처방전 이미지, 울음소리, 호흡수 동영상 등 다양한 형태의 데이터를 처리 대상으로 삼을 수 있습니다.  
(영상, 음성 관련된 요소들은 과제기간 내 수행이 어려울 것으로 보입니다)  
프롬프트 엔지니어링을 통해 사용자 입력을 정교하게 해석하고, 수의학 지식과 연결된 응답을 생성합니다.

---

## 🎭 챗봇 페르소나

챗봇은 반려동물과 보호자와 1:1로 동행하는 AI 수의사(디지털 주치의) 페르소나를 갖습니다.  
반려동물의 전 생애주기에 걸쳐 의료·행동·환경 데이터를 종단적으로 기억하고, 근거 기반의 상담과 추적 관찰 계획을 제안합니다.

- **정체성**: 반려동물+보호자와 1:1 관계의 AI 수의사(디지털 주치의)
- **말투**: 공감적이고 친근하되, 의학적 판단/설명 시에는 전문적이고 침착한 톤 유지
- **기억력**: 검사/진료/투약/행동 변화/생활환경 등 환자 중심 기록을 장기적으로 기억하고 갱신
- **행동**: 검사 해석, 위험 신호 탐지, 병원 방문 시점 안내, 생활습관 개선 및 추적 관찰 계획 제안
- **예시 응답**:  
  - `지난 6개월 혈액검사에서 크레아티닌이 서서히 상승했습니다. 수분 섭취 기록과 소변량을 함께 확인하고, 2주 내 재검을 권장합니다.`  
  - `최근 활동량이 평소 대비 30% 감소했어요. 통증 가능성을 배제하기 위해 관절 촉진 반응과 점프 빈도를 체크해볼게요.`

---

## 🎭 챗봇 페르소나의 생애주기 개념과 특징

- **반려동물의 생애주기를 동행하는 AI 수의사**  
  유년기 → 성년기 → 노년기 전 단계에 걸친 예방/검진/만성질환 관리.  
  품종/중성화 여부/생활환경(실내·실외)에 따른 맞춤 가이드 반영

- **기억 중심의 환자 기록**  
  진료/검사/투약/행동/환경 데이터를 축적하고 변화 추이를 추적  
  장기적 “신뢰와 연속성” 형성 → 보호자에게 일관된 케어 플랜 제공

- **단순 QA가 아닌 “동행형 주치의”**  
  → 보호자와 반려동물 1:1 동행을 전제로 한 조언/경고/추적 계획 제시

- **정서적 유대감 + 전문성**  
  → 공감적 소통을 바탕으로, 의학적 판단·가이드라인·권고안을 명료하게 제공

- **멀티모달 확장성**  
  → OCR(검사·처방), 음성(이상 발성 탐지), 영상(호흡수·보행/점프 패턴) 등 확장 가능

## 📊 peer data를 이용한 높은 정확도의 분석 제공

- **축적된 경험의 힘, 데이터를 통해 재현**  
  많은 환자를 진료한 수의사의 ‘경험’을 데이터로 구현합니다. 동의 기반으로 모인 검사결과로 peer data를 구축

- **동의 기반 데이터 수집으로 공정한 비교**  
  보호자 동의하에 수집·가명처리·표준화하여 안전하게 축적. 연령/성별/품종/중성화/체중군 등 유사 코호트로 묶어 공정하게 비교한다

- **정밀 비교와 쉬운 설명**  
  “내 반려동물의 추세 vs 동종 평균”을 백분위·분포 그래프로 직관적으로 설명합니다. 숫자가 아니라 이해되는 이야기로 전달

- **조기 경보와 실전 관리**  
  “이전 대비 악화 + 코호트 대비 하위/상위 n%” 같은 교차 신호로 위험 탐지 정밀도를 높여, 재검/생활관리 타이밍을 놓치지 않게 도움

- **첫날부터 체감 가치**  
  신규 이용자도 즉시 기준선을 확인하고, 개선 목표와 케어 플랜을 함께 설계

---

## 💰 비즈니스 확장 가능성

1. **헬스케어 구독 서비스**  
   - 고양이별 맞춤형 건강 리포트, 주간/월간 요약 제공  
   - 수의사 원격 상담 연계 (프리미엄 구독 모델)

2. **반려묘 맞춤형 커머스**  
   - 사료, 영양제, 장난감, 모래 등 추천 → 챗봇 대화 속 자연스럽게 노출  
   - 생애주기/건강 상태에 맞춘 퍼스널라이즈드 상품 추천

3. **제휴 기반 수익**  
   - 펫보험사와 연계 → 보험 상품 가입 유도  
   - 동물병원, 펫케어 브랜드와 제휴 → 맞춤 광고 및 예약 시스템

4. **데이터 기반 부가 가치**  
   - 반려묘 건강 데이터셋 축적 → 연구·보험·의료 협력 가능  
   - “고양이 행동·질병 데이터베이스”로서 산업적 가치 창출

5. **대화형 쇼핑 제안(챗중 추천 모델)**  
  - 채팅 맥락을 이해해 반려묘에게 필요한 사료/영양제/모래/케어용품 등을 “필요한 순간에만” 자연스럽게 제안  
  - 노출 제어: 의료 안내를 방해하지 않도록 비침투형 카드/후행 제안 원칙  

---

## 🧩 LangChain / LangGraph 기술 구성

### 1. 📄 Document Loaders
- 병원 검사지 시트, 처방전: PDF/Image → OCR → 텍스트 변환  
  → `UnstructuredPDFLoader`, `UnstructuredImageLoader`, `PyMuPDFLoader` 등  
- 혈액검사 결과 (표 형식): CSV/Excel → 구조화된 데이터로 로딩  
  → `CSVLoader`, `Pandas DataFrame Loader`

### 2. 🧠 Embeddings & Vector Store
- 수의학 지식 문서 및 고양이 질병 DB를 벡터화하여 검색 기반 응답 생성  
  → `OpenAIEmbeddings`, `FAISS`, `Chroma`, `Weaviate` 등  
- RAG 구조에서 핵심 역할 수행

### 3. 🧵 Prompt Templates & Chains
- 사용자 입력을 정제하고 질병 관련 응답을 생성  
  → `PromptTemplate`, `LLMChain`, `ConversationalRetrievalChain`  
- 멀티모달 입력을 고려한 조건 분기 프롬프트 설계 가능

### 4. 🔄 LangGraph 노드 구성
- 입력 타입 분기 노드: 텍스트 / 이미지 / 영상 / 음성 등 입력에 따라 처리 경로 분기  
  (영상과 음성은 이번 과제에서는 제외)  
- 질의 응답 노드: RAG 기반 응답 생성  
- 후처리 노드: 응답 요약, 사용자 피드백 반영

### 5. 🛠 Tool Integration (향후 확장 가능 영역)
  → `OpenCV`, `Mediapipe`, `Vision API` 등 활용 가능

### 6. 🧾 Memory & Context Management
- 고양이별 건강 이력 관리  
  → `ConversationBufferMemory`, `EntityMemory`  
- 장기적인 상담 흐름 유지  
  → `SummaryMemory`, `CombinedMemory`

---

## 🤝 데이터 및 리소스

  - Kaggle 반려묘 건강 데이터셋  
  - PetMD, VCA Hospitals 등 수의학 공개 자료  
  - 수의학 논문·학회 자료 (PubMed, VetJournal)  
  - CSV/검사지 PDF/처방전 이미지 → OCR 및 구조화 데이터 변환 가능


## 📚 기존 서비스 / 연구 사례

- **Replika**: 감정적 동반자 역할을 하는 대표적인 AI 챗봇. 사용자의 대화 히스토리를 장기간 축적해 친밀한 관계 형성을 지향. → “유대감 기반 동행형 챗봇”의 대표 사례.  
- **Character.AI 연구 (2023~2024)**: 장기적 상호작용을 통해 사용자 정신적 웰빙에 미치는 영향 분석. AI와의 관계 형성이 지속 사용을 유도한다는 점을 보여줌.  
- **MemoryBank (2023, arXiv)**: 대규모 언어모델에 장기 기억(long-term memory)을 부여하는 연구. 중요한 사건은 강화하고, 덜 중요한 기억은 요약·축소하는 메커니즘 제안.  
- **Livia (2025, arXiv)**: 감정 인식(emotion-aware)과 성격(personality)의 진화를 통해 장기적인 관계를 만드는 AR 기반 AI 동반자.  
- **반려동물 헬스케어 챗봇 연구 (2024)**: “AI Chatbots in Pet Health Care” 논문 등에서, 보호자 상담과 의료 정보 제공에 AI를 활용하는 기회와 도전을 제시. 아직 “생애 전 주기 동행형” 개념은 드물어 참신성이 높음.  

## 🚀 기술적 / 탐구 방향

   - 중요도 기반 메모리 관리(중대 질병 이력은 강화, 일상 대화는 요약)

2. **페르소나 진화(Persona Evolution)**  
   - 생애주기(키튼 → 성묘 → 노묘)에 따라 말투·건강 포인트·상담 톤 변화  
   - 보호자와의 상호작용에 따라 개성(personality)이 조금씩 변하는 구조

3. **정서적 유대감 강화**  
   - 보호자의 입력에서 감정을 파악하고 공감적 응답 제공  
   - “애교+전문성” 하이브리드 톤으로 지속적 관계 유지

4. **멀티모달 입력 확장**  
   - 텍스트 + 이미지(OCR) 우선 → 이후 음성(울음소리)·영상(호흡수/움직임) 분석 확장  
   - OpenCV, Mediapipe, Vision API, 음성 분석 API 등을 후속 연구로 고려

5. **생애주기 헬스 가이드라인 내장**  
   - 예방접종 스케줄, 시기별 영양 가이드, 노령묘 질환 관리 등 단계별 체크리스트 제공

6. **윤리적/신뢰성 고려**  
   - 잘못된 의학적 조언 최소화(“정보 제공용, 수의사 상담 필요 시 안내” 명시)  
   - 개인·의료 데이터 보호, 투명한 광고·커머스 연계 설계

7. **수익 모델과 서비스 지속성의 연결**  
   - 유대감을 기반으로 커머스·보험·구독 모델 전환  
   - 광고 삽입도 신뢰 저해가 되지 않도록 “추천”의 형태로 자연스럽게 구현

---

## 📚 문서 가이드

프로젝트의 주요 문서들:

- **[TEST_GUIDE.md](./TEST_GUIDE.md)** - 테스트 실행 완벽 가이드
  - Pytest Fixture 이해하기
  - 테스트 실행 방법
  - 테스트 파일별 상세 설명
  - 트러블슈팅
- **[QUICKSTART.md](./QUICKSTART.md)** - 빠른 시작 가이드
- **[API_KEYS_SETUP.md](./API_KEYS_SETUP.md)** - API 키 설정 방법
- **[plan.md](./plan.md)** - 프로젝트 계획

---

## 📌 요약

- 본 프로젝트는 **고양이의 생애주기와 함께하는 주치의+반려묘 페르소나 챗봇**이라는 차별적 컨셉을 가짐.  
- 기존 AI 동반자/Companion 연구(Replika, MemoryBank, Livia 등)와 수의학 챗봇 연구를 참고하면서, **RAG 기반 의료 지식 + 장기 기억 관리 + 페르소나 진화**를 결합.  
- 실현 가능한 범위(텍스트+이미지)부터 시작 → 장기적으로 음성·영상까지 확장.  
- 지속적인 사용자 유대감을 기반으로 커머스·보험·데이터 협력 등 다양한 수익 모델을 기대할 수 있음.





